name: "test conda nest"
on:
  pull_request:
  push:
jobs:
  tests:
    strategy:
      matrix:
        os: [ubuntu-18.04, macos-latest]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"
      - name: Dump job context
        env:
          JOB_CONTEXT: ${{ toJson(job) }}
        run: echo "$JOB_CONTEXT"
      - name: Dump steps context
        env:
          STEPS_CONTEXT: ${{ toJson(steps) }}
        run: echo "$STEPS_CONTEXT"
      - name: Dump runner context
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}
        run: echo "$RUNNER_CONTEXT"
      - name: Dump strategy context
        env:
          STRATEGY_CONTEXT: ${{ toJson(strategy) }}
        run: echo "$STRATEGY_CONTEXT"
      - name: Dump matrix context
        env:
          MATRIX_CONTEXT: ${{ toJson(matrix) }}
        run: echo "$MATRIX_CONTEXT"
      - run: ls $HOME
      - run: which python

      - name: CHECK macos
        run: if [[ ${{ matrix.os }} == "macos-latest" ]]; then brew install gsl open-mpi libomp; fi

#    - run: conda config --set always_yes yes --set changeps1 no
#    - run: conda update -q conda
#        # Useful for debugging any issues with conda
#    - run: conda info -a
#    - run: conda config --add channels conda-forge
#    - run: conda install -y -c conda-forge conda-build conda-verify
#    - run: conda build ../../nest
#    - run: conda install nest --use-local